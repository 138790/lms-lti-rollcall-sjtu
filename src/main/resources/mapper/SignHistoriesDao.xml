<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.lmsltirollcallsjtu.common.dao.SignHistoriesDao">


	<!--<resultMap id="maps" type="com.lmsltirollcallsjtu.common.bean.bo.SignHistoryInfo">
		        <result property="userId" column="user_id" jdbcType="INTEGER" javaType="java.lang.Long"></result>
		     </resultMap>-->

    <!--根据点名id查询签到历史-->

    <select id="findSignHistoryByRollcallId" resultType="com.lmsltirollcallsjtu.common.bean.bo.SignHistoryInfo">
		select section_ids sectionCodesJsonStr,
	           attendances_count,
	           created_date
		from   sign_histories
		where id=#{id}
	</select>
	<!--老师查询签到历史列表-->
	<!--<resultMap id="findSignHistory" type="com.lmsltirollcallsjtu.common.bean.bo.SignHistoryInfo">
		<result property="sectionIds" column="section_ids"/>
		<result property="attendancesCount" column="attendances_count"/>
		<result property="insertedAt" column="inserted_at"/>
		<collection property=""
	</resultMap>-->
	<select id="findSignHistoryListByCourseIdAndUserId"
			parameterType="com.lmsltirollcallsjtu.common.bean.bo.UserCourseInfo"
			resultType="com.lmsltirollcallsjtu.common.bean.dto.SignHistoryDto">
		select section_codes sectionCodesJsonStr,
			   attendances_count,
			   created_date
		  from sign_histories
		 where course_code=#{courseCode}
		  and  user_code=#{userCode}
	</select>

</mapper>
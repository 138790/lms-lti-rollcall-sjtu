<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.lmsltirollcallsjtu.common.dao.ScanSignDao">
	<!--根据主键id查询学生状态-->
	<select id="queryStateByRecordId" parameterType="java.lang.String" resultType="java.lang.String">
		select state
		from sign_records
		where id=#{id}
	</select>

    <!--扫码之后修改状态为正常-->
    <!-- useGeneratedKeys表示应用自增主键值
         keyProperty 表示把自增主键值赋值给参数对象的id属性-->
    <update id="scanUpdateState" parameterType="com.lmsltirollcallsjtu.common.bean.dto.SignRecordDto">
	update sign_records
	<set>
		<if test="updatedBy!=null and updatedBy!=''">
			updated_by=#{updatedBy},
		</if>
		<if test="state!=null and state!=''">
			state=#{state},
		</if>
		<if test="updatedDate != null">
			updated_date=#{updatedDate},
		</if>
	</set>
	where id=#{id}
</update>
</mapper>
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.lmsltirollcallsjtu.common.dao.ScanSignDao">
    <!--学生签到插入学生信息-->
    <!-- useGeneratedKeys表示应用自增主键值
         keyProperty 表示把自增主键值赋值给参数对象的id属性-->
    <update id="scanUpdateState" parameterType="com.lmsltirollcallsjtu.common.bean.dto.SignRecordsDto">
	update sign_records
	<set>
		<if test="id!=null and id!=''">
			id=#{id},
		</if>
		<if test="openId!=null and openId!=''">
			open_id=#{openId},
		</if>
		<if test="createdBy!=null and createdBy!=''">
			created_by=#{createdBy},
		</if>
		<if test="updatedBy!=null and updatedBy!=''">
			updated_by=#{updatedBy},
		</if>

		<if test="state!=null and state!=''">
			state=#{state},
		</if>
		<if test="userName!=null and userName!=''">
			user_name=#{userName},
		</if>
			updated_date=now(),
	</set>

	where user_code=#{userCode} and rollcall_code=#{rollcallCode}
</update>
</mapper>